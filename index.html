<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Produtos</title>
</head>
<body>
    <h1>Catálogo de Produtos</h1>

    <script>
        // funções
        const lerDados = () => {
            let produto = {}

            produto.id = id
            produto.nome = prompt("Nome do produto:")
            produto.preco = Number(prompt("Preço do produto:"))
            produto.descricao = prompt("Descrição do produto:")

            return produto
        }

        const validarProduto = (produto) => {
            if(produto.nome === ""){
                while(produto.nome === ""){
                    produto.nome = prompt("Informe o nome do produto:")
                }
            }

            if(produto.preco === 0 || produto.preco === ""){
                while(produto.preco === 0 || produto.preco === ""){
                    produto.preco = Number(prompt("Informe o preço do produto:"))
                }
            }

            if(produto.descricao === ""){
                while(produto.descricao ===  ""){
                    produto.descricao = prompt("Informe a descrição do produto:")
                }
            }            

            return true
        }

        const adicionarProduto = (produto) => {
            produtos.push(produto)
            id++
        }

        const cadastrarProduto = () => {
            let produto = lerDados()

            if(validarProduto(produto)){
                adicionarProduto(produto)
            }
            
            alert("Produto cadastrado com sucesso!")
        }

        const buscarProduto = () => {
            const nome = prompt("Nome do produto que deseja buscar:")
            let achou = false
            let mensagem = `ID - Nome - Preço - Descrição \n\n`

            for(let i = 0; i < produtos.length; i++){
                if(produtos[i].nome === nome){
                    achou = true
                    mensagem += `${produtos[i].id} - ${produtos[i].nome} - ${produtos[i].preco} - ${produtos[i].descricao} \n`
                }
            }

            if(!achou){
                alert("Produto não encontrado")
            }else{
                alert(mensagem)
            }
        }

        const atualizarProduto = () => {
            const nome = prompt("Nome do produto que deseja atualizar:")
            let achou = false
            let produto = {}

            for(let i = 0; i < produtos.length; i++){
                if(produtos[i].nome === nome){
                    achou = true
                    if(confirm(`
                    ${produtos[i].id} - ${produtos[i].nome} - ${produtos[i].preco} - ${produtos[i].descricao} \n\n
                    Deseja atualizar esse produto?
                    `)){
                        produtos[i].nome = prompt("Novo nome:")
                        produtos[i].preco = Number(prompt("Novo preço:"))
                        produtos[i].descricao = prompt("Nova descrição:")
                        if(validarProduto(produtos[i])){
                            alert("Produto atualizado com sucesso")
                        }
                    }else{
                        alert("Esse produto não foi atualizado")
                    }
                }
            }

            if(!achou){
                alert("Produto não encontrado")
            }

        }

        const listarProdutos = () => {
            let mensagem = `ID - Nome - Preço - Descrição \n\n`

            for(let i = 0; i < produtos.length; i++){
                mensagem += `${produtos[i].id} - ${produtos[i].nome} - ${produtos[i].preco} - ${produtos[i].descricao} \n`
            }

            alert(mensagem)
        }
        
        const removerProduto = () => {
            const nome = prompt("Nome do produto que deseja remover:")
            let achou = false

            for(let i = 0; i < produtos.length; i++){
                if(produtos[i].nome === nome){
                    achou = true
                    if(confirm(`
                    ${produtos[i].id} - ${produtos[i].nome} - ${produtos[i].preco} - ${produtos[i].descricao} \n\n
                    Deseja excluir esse produto?
                    `)){
                        produtos.splice(i, 1)
                        alert("Produto excluído com sucesso")
                    }else{
                        alert("Esse produto não foi excluído")
                    }
                }
            }

            if(!achou){
                alert("Produto não encontrado")
            }
        }

        const mostrarOpcoes = () => {
            alert(`
            1 - Adicionar produto
            2 - Buscar produto
            3 - Atualizar produto
            4 - Visualizar todos os produtos
            5 - Remover produto
            0 - Sair`)
            let opcao = prompt("Escolha alguma opção:")
            return opcao
        }

        // variáveis globais
        const produtos = []
        let id = 1
        let valor

        // loop principal
        do{
            valor = mostrarOpcoes()

            if(valor === "1"){
                cadastrarProduto()
            }else if(valor === "2"){
                buscarProduto()
            }else if(valor === "3"){
                atualizarProduto()
            }else if(valor === "4"){
                listarProdutos()
            }else if(valor === "5"){
                removerProduto()
            }else if(valor === "0"){
                break
            }else{
                alert("Valor inválido!")
            }
        }while(true)

        // Vitor Gabriel de Azevedo Oliveira
    </script>
</body>
</html>
